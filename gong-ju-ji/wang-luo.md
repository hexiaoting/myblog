## 查看

ip a

ethtool eth0

arping -I eth0 192.168.0.10

---

ping -I eth2 192.168.0.150//通过指定端口eth2来ping192.168.0.150这个地址。

查看两个网口是否连载同一个交换机上: 看他ping过去有几跳

---

查看流量的工具：vnstat , sar, ntop

vnstat -i em1 -l

sar -n DEV 1

ntop

---

用tcpreplay发送DNS报文时，由于：

1. DNS报文平均100Bytes
2. 每个网卡可处理的吞吐率有限，比如最大达到300万个包/s。

那么，无论如何在一台机器上并发执行几个tcpreplay，统一网卡的发送流量最大就是3Gbps。

潜在解决方案：在多台机器上并发执行tcpreplay，这样就不会被一块网卡的吞吐量给限制住。

最终，在中心的发包机108上的问题是：我们的包发出去的速率是挺大，但是在交换机那边就已经丢掉很多了，原因是构造的包有问题，可能存在回环。后来自己构造了51207个报文的一个pcap包（各个报文的大小都小于2000Bytes），这样一个tcpreplay的速率就能达到4Gbps. 后来发现可以用tcprewrite工具改写所有的报文的目的ip，这样就可以定向的给厂商发数据了，而其他节点收不到数据。【需要看看网络知识：为何设置正确的目的 mac地址，只有那一台能收到，而乱的mac地址大家全部都能收到】。

